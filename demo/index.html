<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>A* Pathfinding library</title>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/atom-one-dark.css">
    </head>
    <body>
        <header>
            <h1>A* Pathfinding library</h1>
            <nav>
                <a href="https://github.com/lowlighter/astar">GitHub</a>
                <a href="https://lowlighter.github.io/astar/docs">Documentation</a>
                <a href="https://lowlight.fr/en/blog/astar">lowlight.fr</a>
            </nav>
        </header>
        <main class="container-full">
            <div class="container">
                <p>
                    This is a live demo from this <a href="https://github.com/lowlighter/astar">library</a>.
                </p>
                <p>
                    Unlike <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random">Math.random</a>, this library allows user
                    to choose himself a <span class="bold">seed</span> (both number and hashed strings), in addition to proposing differents probability distributions (you may check <a href="https://lowlighter.github.io/random/docs/">Documentation</a>
                    to get a complete list of availables distributions).
                </p>
                <p>
                    Generating a large number at once may slow down the page.
                </p>
                <p>
                    See it on <a href="https://github.com/lowlighter/astar">GitHub</a> for more informations.
                </p>
                <p class="local-warning">
                    It seems you're running this file from a local file system.<br />
                    Cross origin requests may be supported only for protocol schemes on some browsers.
                </p>
            </div>
            <div class="container app">
                <div class="app-view">
                </div>
                <div class="app-controller">
                    <table>
                        <tr>
                            <td>Diagonals</td>
                            <td>
                                <select name="diagonals">
                                    <option value="1">Enabled</option>
                                    <option value="0">Disabled</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Cutting</td>
                            <td>
                                <select name="cutting">
                                    <option value="1">Yes</option>
                                    <option value="0">No</option>
                                    <option value="strict">No (Strict)</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Toric map</td>
                            <td>
                                <select name="torus">
                                    <option value="1">Yes</option>
                                    <option value="0">No</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Heuristic</td>
                            <td>
                                <select name="heuristic">
                                    <option value="manhattan">Manhattan</option>
                                    <option value="diagonal">Diagonal</option>
                                    <option value="euclidian">Euclidian</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Profil</td>
                            <td>
                                <select name="profil">
                                    <option value="0">Terrestrial</option>
                                    <option value="1">Aquatic</option>
                                    <option value="2">Amphibian</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Scores</td>
                            <td>
                                <select name="scores">
                                    <option value="1">Show</option>
                                    <option value="0">Hide</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Jump Point Search</td>
                            <td>
                                <select name="jps">
                                    <option value="1">Enabled</option>
                                    <option value="0">Disabled</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Map</td>
                            <td><button name="generate">Generate a new one</button></td>
                        </tr>
                    </table>
                </div>
            </div>
        </main>
        <div class="container-full">
            <pre>
                <code class="code">
        //Initialization
            let map = [], X = <span class="code-X">0</span>, Y = <span class="code-Y">0</span>

        //Map generation
            for (let x = 0; x < X; x++) { map[x] = []
                for (let y = 0; y < Y; y++) {
                    //Returns a positive value for terrestrial biomes and negative for the aquatics ones
                        map[x][y] = biome(x, y)
                }
            }

        //Options
            let options = {
                order:"xy",
                diagonals:<span class="code-diagonals">true</span>,
                cutting:<span class="code-cutting">false</span>,
                torus:<span class="code-torus">false</span>,
                heuristic:<span class="code-heuristic">"euclidian"</span>,
                thread:false
            }

        //Create configuration
        //It's possible to define multiple layers with differents options/cost functions with a same map
        //Cost function returns the cost to go from node n to node m
            let astar = new Lowlight.Astar.Configuration(map,
                $.extend({cost(n, m) { return m >= 0 ? m : null }}, options), //Terrestrial
                $.extend({cost(n, m) { return m < 0 ? -m : null }}, options), //Aquatic
                $.extend({cost(n, m) { return Math.abs(m) }}, options) //All biomes types
            )

        //Path computing
            astar.path({x:<span class="code-start-x">0</span>, y:<span class="code-start-y">0</span>}, {x:<span class="code-goal-x">0</span>, y:<span class="code-goal-y">0</span>}, {
                callback(path, scores) { path.map(n => console.log(n)) },
                layer:<span class="code-profil">0</span>, //<span class="code-profil-name">Terrestrial</span>
                jps:<span class="code-jps">false</span>
            })</code>
            </pre>
        </div>

        <div class="hidden">
            <p class="text-no-path-found">No path found :(</p>
            <p class="text-p1">Terrestrial</p>
            <p class="text-p2">Aquatic</p>
            <p class="text-p3">Amphibian</p>
        </div>

        <script type="text/javascript" src="./js/jquery.js"></script>
        <script type="text/javascript" src="./js/noise.js"></script>
        <script type="text/javascript" src="./js/pixi.js"></script>
        <script type="text/javascript" src="./../bin/lowlight.astar.min.js"></script>
        <script type="text/javascript" src="./js/demo.js"></script>
        <script type="text/javascript" src="./js/highlight.pack.js"></script>
        <script type="text/javascript"></script>
        <script>hljs.initHighlightingOnLoad()</script>
        <script type="text/javascript">if (/file/.test(window.location.protocol)) { $(".local-warning").show() }</script>
    </body>
</html>
