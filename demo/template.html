<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>{{TITLE}}</title>
        <link rel="stylesheet" href="css/style.css">
        <link rel="stylesheet" href="css/atom-one-dark.css">
    </head>
    <body>
        <header>
            <h1>{{TITLE}}</h1>
            <nav>
                <a href="{{REPO}}">GitHub</a>
                <a href="{{DOCS}}">Documentation</a>
                <a href="{{PAGE}}">lowlight.fr</a>
            </nav>
        </header>
        <main class="container-full">
            <div class="container">
                <p>
                    This is a live demo from this <a href="{{REPO}}">library</a>.
                </p>
                <p>
                    Unlike <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/random">Math.random</a>, this library allows user
                    to choose himself a <span class="bold">seed</span> (both number and hashed strings), in addition to proposing differents probability distributions (you may check <a href="https://lowlighter.github.io/random/docs/">Documentation</a>
                    to get a complete list of availables distributions).
                </p>
                <p>
                    Generating a large number at once may slow down the page.
                </p>
                <p>
                    See it on <a href="{{REPO}}">GitHub</a> for more informations.
                </p>
                <p class="local-warning">
                    It seems you're running this file from a local file system.<br />
                    Cross origin requests may be supported only for protocol schemes on some browsers.
                </p>
            </div>
            <div class="container app">
                <div class="app-view">
                </div>
                <div class="app-controller">
                    <table>
                        <tr>
                            <td>Diagonales</td>
                            <td>
                                <select name="diagonals">
                                    <option value="1">Activées</option>
                                    <option value="0">Désactivées</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Couper à travers</td>
                            <td>
                                <select name="cutting">
                                    <option value="1">Oui</option>
                                    <option value="0">Non</option>
                                    <option value="strict">Non (Strict)</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Carte torique</td>
                            <td>
                                <select name="torus">
                                    <option value="1">Oui</option>
                                    <option value="0">Non</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Heuristique</td>
                            <td>
                                <select name="heuristic">
                                    <option value="manhattan">Manhattan</option>
                                    <option value="diagonal">Diagonales</option>
                                    <option value="euclidian">Euclidienne</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Profil</td>
                            <td>
                                <select name="profil">
                                    <option value="0">Terrestre</option>
                                    <option value="1">Aquatique</option>
                                    <option value="2">Amphibien</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Scores</td>
                            <td>
                                <select name="scores">
                                    <option value="1">Afficher</option>
                                    <option value="0">Masquer</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Jump Point Search</td>
                            <td>
                                <select name="jps">
                                    <option value="1">Activé</option>
                                    <option value="0">Désactivé</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <td>Carte</td>
                            <td><button name="generate">Générer une nouvelle carte</button></td>
                        </tr>
                    </table>
                </div>
            </div>
        </main>
        <div class="container-full">
            <pre>
                <code class="code">
        //Initialisation
            let map = [], X = <span class="code-X">0</span>, Y = <span class="code-Y">0</span>

        //Création de la carte
            for (let x = 0; x < X; x++) { map[x] = []
                for (let y = 0; y < Y; y++) {
                    //Retourne une valeur positive pour les biomes terrestres, négative pour les biomes aquatiques
                        map[x][y] = biome(x, y)
                }
            }

        //Paramétrage des options
            let options = {
                order:"xy",
                diagonals:<span class="code-diagonals">true</span>,
                cutting:<span class="code-cutting">false</span>,
                torus:<span class="code-torus">false</span>,
                heuristic:<span class="code-heuristic">"euclidian"</span>,
                thread:false
            }

        //Nouvelle configuration
        //Il est possible de définir plusieurs couches avec différents paramètres/fonction de coût avec une même carte
        //n désigne la cellule de départ et m celle d'arrivée
            let astar = new Lowlight.Astar.Configuration(map,
                $.extend({cost(n, m) { return m >= 0 ? m : null }}, options), //Terrestre
                $.extend({cost(n, m) { return m < 0 ? -m : null }}, options), //Aquatic
                $.extend({cost(n, m) { return Math.abs(m) }}, options) //Tout type de terrain
            )

        //Calcul d'un chemin
            astar.path({x:<span class="code-start-x">0</span>, y:<span class="code-start-y">0</span>}, {x:<span class="code-goal-x">0</span>, y:<span class="code-goal-y">0</span>}, {
                callback(path, scores) { path.map(n => console.log(n)) },
                layer:<span class="code-profil">0</span>, //<span class="code-profil-name">Terrestre</span>
                jps:<span class="code-jps">false</span>,
                static:true, //Teste si les noeuds sont connectés pour éviter les calculs inutiles
            })</code>
            </pre>
        </div>


        <script type="text/javascript" src="./js/jquery.js"></script>
        <script type="text/javascript" src="./js/noise.js"></script>
        <script type="text/javascript" src="./js/pixi.js"></script>
        <script type="text/javascript" src="./../bin/lowlight.astar.min.js"></script>
        <script type="text/javascript" src="./js/demo.js"></script>
        <script type="text/javascript" src="./js/highlight.pack.js"></script>
        <script type="text/javascript"></script>
        <script>hljs.initHighlightingOnLoad()</script>
        <script type="text/javascript">if (/file/.test(window.location.protocol)) { $(".local-warning").show() }</script>
    </body>
</html>
